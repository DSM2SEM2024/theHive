<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fatec - SALA</title>
    <link rel="stylesheet" href="css/homestyle.css">
    <link rel="stylesheet" href="css/header.css">
    <link rel="stylesheet" href="css/homereset.css">
    <link rel="stylesheet" href="css/homeResponsivo.css">
    <link rel='stylesheet' href='https://cdn-uicons.flaticon.com/2.6.0/uicons-regular-straight/css/uicons-regular-straight.css'>
    <link rel='stylesheet' href='https://cdn-uicons.flaticon.com/2.6.0/uicons-bold-rounded/css/uicons-bold-rounded.css'>
    <link rel='stylesheet'
        href='https://cdn-uicons.flaticon.com/2.6.0/uicons-solid-straight/css/uicons-solid-straight.css'>
    <link rel="shortcut icon" href="Images/Fatec-SALA.png" type="image/x-icon">
</head>

<body>
    <header>

        <h1>Fatec - SALA</h1>

        <div class="busca">
            <img src="Images/search.png" alt="Ícone de pesquisa">
            <input id="pesquisa" type="text" placeholder="O que está procurando?">
            <button id="limpa-input" class="btn-limpar" type="button">&times;</button>
        </div>

        <div id="icons">
            <i title="Notificações" class="btn-notificacoes fi fi-ss-bell"></i>
            <i title="Perfil" class="btn-perfil fi fi-ss-circle-user"></i>
        </div>

    </header>

    <main>
        <nav>
            <div class="notificacoes">
                <p id="titulo-not">Pendentes</p>
                <div class="pendentes">

                    <a href="" class="card-pedido">
                        <div id="txt-card">
                            <p id="txt-card-lab">Laboratório 22</p>
                            <p id="txt-card-dic">Designin Digital</p>
                        </div>
                        <div id="txt-card-2">
                            <p id="txt-card-dia">26/04/24</p>
                            <p id="txt-card-hrs">16:20 - 17:30</p>
                        </div>
                    </a>

                    <a href="" class="card-pedido">
                        <div id="txt-card">
                            <p id="txt-card-lab">Laboratório 22</p>
                            <p id="txt-card-dic">Designin Digital</p>
                        </div>
                        <div id="txt-card-2">
                            <p id="txt-card-dia">26/04/24</p>
                            <p id="txt-card-hrs">16:20 - 17:30</p>
                        </div>
                    </a>

                    <a href="" class="card-pedido">
                        <div id="txt-card">
                            <p id="txt-card-lab">Laboratório 22</p>
                            <p id="txt-card-dic">Designin Digital</p>
                        </div>
                        <div id="txt-card-2">
                            <p id="txt-card-dia">26/04/24</p>
                            <p id="txt-card-hrs">16:20 - 17:30</p>
                        </div>
                    </a>

                </div>
                <div id="titulo-not-1">
                    <p>Aprovadas</p>
                </div>
                <div class="aprovadas">

                    <a href="" class="card-pedido">
                        <div id="txt-card">
                            <p id="txt-card-lab">Laboratório 22</p>
                            <p id="txt-card-dic">Designin Digital</p>
                        </div>
                        <div id="txt-card-2">
                            <p id="txt-card-dia">26/04/24</p>
                            <p id="txt-card-hrs">16:20 - 17:30</p>
                        </div>
                    </a>

                    <a href="" class="card-pedido">
                        <div id="txt-card">
                            <p id="txt-card-lab">Laboratório 22</p>
                            <p id="txt-card-dic">Designin Digital</p>
                        </div>
                        <div id="txt-card-2">
                            <p id="txt-card-dia">26/04/24</p>
                            <p id="txt-card-hrs">16:20 - 17:30</p>
                        </div>
                    </a>

                    <a href="" class="card-pedido">
                        <div id="txt-card">
                            <p id="txt-card-lab">Laboratório 22</p>
                            <p id="txt-card-dic">Designin Digital</p>
                        </div>
                        <div id="txt-card-2">
                            <p id="txt-card-dia">26/04/24</p>
                            <p id="txt-card-hrs">16:20 - 17:30</p>
                        </div>
                    </a>

                </div>
                <p id="titulo-not-1">Reprovadas</p>
                <div class="reprovadas">

                    <a href="" class="card-pedido">
                        <div id="txt-card">
                            <p id="txt-card-lab">Laboratório 22</p>
                            <p id="txt-card-dic">Designin Digital</p>
                        </div>
                        <div id="txt-card-2">
                            <p id="txt-card-dia">26/04/24</p>
                            <p id="txt-card-hrs">16:20 - 17:30</p>
                        </div>
                    </a>

                    <a href="" class="card-pedido">
                        <div id="txt-card">
                            <p id="txt-card-lab">Laboratório 22</p>
                            <p id="txt-card-dic">Designin Digital</p>
                        </div>
                        <div id="txt-card-2">
                            <p id="txt-card-dia">26/04/24</p>
                            <p id="txt-card-hrs">16:20 - 17:30</p>
                        </div>
                    </a>

                    <a href="" class="card-pedido">
                        <div id="txt-card">
                            <p id="txt-card-lab">Laboratório 22</p>
                            <p id="txt-card-dic">Designin Digital</p>
                        </div>
                        <div id="txt-card-2">
                            <p id="txt-card-dia">26/04/24</p>
                            <p id="txt-card-hrs">16:20 - 17:30</p>
                        </div>
                    </a>

                    <a href="" class="card-pedido">
                        <div id="txt-card">
                            <p id="txt-card-lab">Laboratório 22</p>
                            <p id="txt-card-dic">Designin Digital</p>
                        </div>
                        <div id="txt-card-2">
                            <p id="txt-card-dia">26/04/24</p>
                            <p id="txt-card-hrs">16:20 - 17:30</p>
                        </div>
                    </a>

                </div>

            </div>



            <div class="perfil">
                <div class="usuario">
                    <p id="avatar"><span id="letra">L</span></p>
                    <h3 id="name">Lucas</h3>
                </div>
                <div class="info-perfil">
                    <p id="label">Curso(s):</p>
                    <p id="courses">Desenvolvimento de software Multiplataforma, Manutenção Iindustrial</p>
                    <p id="label">E-mail:</p>
                    <p id="email">lucas@gmail.com</p>
                    <a href="#" onclick="logout()">Sair</a>
                </div>
            </div>
            
        </nav>

        <script>
            document.addEventListener("DOMContentLoaded", function () {
                const userId = localStorage.getItem('userId');
                if (userId) {
                    getUserInfo(userId);
                }

                async function getUserInfo(userId) {
                    try {
                        const response = await fetch(`http://localhost:3000/users/${userId}`);

                        // Verifica se a resposta foi bem-sucedida
                        if (!response.ok) {
                            throw new Error('Erro ao obter informações do usuário');
                        }

                        const data = await response.json();
                        if (data.error) {
                            console.error(data.error);
                            return;
                        }

                        // Preenche os campos com as informações do usuário
                        document.getElementById('courses').innerText = data.curso || "Não especificado";
                        document.getElementById('email').innerText = data.email || "Não especificado";
                        document.getElementById('name').innerText = data.nome || "Não especificado";
                        document.getElementById('nome-usuario').innerText = data.nome || "Não especificado";
                        document.getElementById('letra').innerText = data.nome.charAt(0) || "Não especificado";
                    } catch (error) {
                        console.error('Erro ao buscar informações do usuário:', error);
                    }
                }
            })

            function logout() {
                localStorage.removeItem("usuario");
                localStorage.removeItem("paginasPermitidas");
                localStorage.removeItem("userId");
                window.location.href = '../index.html'; // Redireciona para a página de login
            }
            ;
        </script>

        <p id="titulo-ola">Olá, <span id="nome-usuario">NOME</span>, seja bem vindo(a) ao <strong>SALA</strong>!</p>

        <div class="card-pesquisa">
            <div class="busca-2">
                <img src="Images/search.png" alt="Ícone de pesquisa">
                <input id="pesquisa-2" type="text" placeholder="O que está procurando?">
                <button id="limpa-input2" class="btn-limpar2" type="button">&times;</button>
            </div>
        </div>

        <h2>Minhas reservas:</h2>

        <div class="card-reservas">
            <p>Você não possui reservas no momento.</p>
            <button onclick="window.location.href='../Laboratorios/index.html'">Fazer reserva</button>
        </div>

        
    </main>
    
    <footer class="nav-mobile">
        <ul>
            <li>
                <a href="#">
                    <i id="home" class="fi fi-ss-home"></i>
                    <p class="txt-footer">Home</p>
                </a>
            </li>
            <li>
                <i class="fi fi-br-search"></i>
                <p class="txt-footer">Busca</p>
            </li>
            <li class="btn-notificacoes">
                <i title="Notificações" class="fi fi-ss-bell"></i>
                <p class="txt-footer">Notificações</p>
            </li>
            <li class="btn-perfil">
                <i title="Perfil" class="fi fi-ss-circle-user"></i>
                <p class="txt-footer">Perfil</p>
            </li>
        </ul>
    </footer>
    
    
    
    
    
    <script src="js/home.js"></script>

</body>

</html>